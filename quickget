#!/usr/bin/env bash
export LC_ALL=C

# In order to add an operating system to quickget, add a plugin in the
#   quickget-resources directory

function cleanup() {
  if [ -n "$(jobs -p)" ]; then
    kill "$(jobs -p)"
  fi
}

BASE_DIR="$(dirname "${0}")"
RESOURCE_DIR="${BASE_DIR}/quickget-resources"

while (( "${#}" )); do
    case "${1}" in
        list|list_csv)
            list_csv
            exit 0
            ;;
        list_json)
            list_json
            exit 0
            ;;
        --version|-version)
            "${BASE_DIR}"/quickemu ---version
            exit 0
            ;;
        --download-iso)
            DOWNLOAD_ONLY=true
            shift
            ;;
        --test-iso-url|-t)
            test_iso_url
            shift
            ;;
        --show-iso-url|-s)
            show_iso_url
            shift
            ;;
        --open-distro-homepage|-o)
            OPEN_HOMEPAGE=true
            shift
            ;;
        --*|-*)
            echo "Unsupported flag ${1}"
            shift
            ;;
        *)
            PARAMS="${PARAMS} ${1}"
            shift
            ;;
    esac
done

